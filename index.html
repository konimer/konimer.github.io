<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KONIMER PREMIUM</title>
<style>
body {
  margin: 0;
  background: #000;
  color: white;
  font-family: 'Inter', sans-serif;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
.container {
  flex: 1;
  text-align: center;
  padding: 20px;
  max-width: 95%;
  margin: 0 auto;
}
.waveform-container {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 0 auto 30px;
}
.waveform {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  z-index: 1;
}
.profile-wrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
}
.profile {
  border-radius: 50%;
  width: 200px;
  height: 200px;
  object-fit: cover;
  border: 4px solid #baff3d;
  cursor: pointer;
  display: block;
}
.play-btn {
  position: absolute;
  bottom: -10px;
  right: -10px;
  background: #baff3d;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: black;
  cursor: pointer;
  z-index: 3;
  user-select: none;
  border: none;
  outline: none;
}
h1 {
  margin-top: 20px;
  font-size: 24px;
}
p {
  color: #bbb;
  margin-bottom: 30px;
  max-width: 500px;
  line-height: 1.5;
}
.btn {
  display: block;
  background: #baff3d;
  color: black;
  padding: 12px 30px;
  border-radius: 30px;
  margin: 10px auto;
  font-weight: 600;
  text-decoration: none;
  width: 220px;
  transition: 0.3s;
  position: relative;
  z-index: 5;
}
.btn:hover {
  background: #d4ff6e;
  transform: scale(1.05);
}
footer {
  color: #666;
  font-size: clamp(10px, 1.2vw, 13px);
  text-align: center;
  padding: 10px 20px;
  width: 100%;
  box-sizing: border-box;
  flex-shrink: 0;
}
canvas { display: block; }

/* üîù Hisoblagich o‚Äòng yuqorida */
#visitorCounter {
  position: fixed;
  top: 10px;
  right: 10px;
  background: #baff3d;
  color: #000;
  padding: 6px 12px;
  border-radius: 8px;
  font-weight: bold;
  z-index: 9999;
  box-shadow: 0 0 10px #baff3d;
  transition: transform 0.2s ease-in-out;
}
#visitorCounter:hover {
  transform: scale(1.08);
}
</style>
</head>
<body>
<div class="container">
  <div class="waveform-container">
    <canvas id="audioCanvas" class="waveform" width="300" height="300"></canvas>
    <div class="profile-wrapper">
      <img src="https://github.com/konimer/konimer.github.io/raw/main/retouch_2025050922553313.jpg"  
           class="profile" alt="KONIMER" id="profile">
      <button class="play-btn" id="playBtn">‚ñ∂</button>
    </div>
  </div>

  <h1>KONIMER PREMIUM</h1>
  <p>Bizning brend sizning biznesingiz uchun mukammal va zamonaviy saytlarni taklif qiladi.</p>

  <a href="https://instagram.com/ru.raximboyev" class="btn" target="_blank">Instagram</a>
  <a href="tel:+998947370714" class="btn">+998 94 737 07 14</a>
  <a href="https://t.me/konimer" class="btn" target="_blank">Telegram</a>
  <a href="https://t.me/+VmvgNbHFGWs4Y2Yy" class="btn" target="_blank">Telegram guruh</a>
</div>

<footer>¬©2025 KONIMER PREMIUM | RAXIMBOYEV UMIDJON</footer>

<!-- üëÅ Hisoblagich -->
<div id="visitorCounter">Loading...</div>

<audio id="bgAudio" loop>
  <source src="music.mp3" type="audio/mpeg">
  Sizning brauzeringiz audio elementni qo'llab-quvvatlamaydi.
</audio>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// üî• Firebase sozlamalari
const firebaseConfig = {
  apiKey: "AIzaSyA49ofwIbHIqTSWqKG0LxrlvcQ2QtnDqFo",
  authDomain: "konimer-premium.firebaseapp.com",
  databaseURL: "https://konimer-premium-default-rtdb.firebaseio.com",
  projectId: "konimer-premium",
  storageBucket: "konimer-premium.firebasestorage.app",
  messagingSenderId: "56730390889",
  appId: "1:56730390889:web:6badaf0e11fc206b63adf8",
  measurementId: "G-P0FT8G239C"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// üëÅ Real-time hisoblagich
function incrementVisitor() {
  const counterRef = db.ref('visitorCount');
  counterRef.transaction(current => (current || 0) + 1);
}
function showCounter(count) {
  document.getElementById('visitorCounter').innerText = `Foydalanuvchi: ${count || 0}`;
}
db.ref('visitorCount').on('value', snap => showCounter(snap.val()));
window.addEventListener('load', incrementVisitor);

// üéµ Musiqa va animatsiya
const audio = document.getElementById("bgAudio");
const canvas = document.getElementById("audioCanvas");
const ctx = canvas.getContext("2d");
const profile = document.getElementById("profile");
const playBtn = document.getElementById("playBtn");
let audioCtx, analyser, source, bufferLength, dataArray, started=false, playing=false, particles=[], rotation=0;

class Particle{
  constructor(x,y,color){
    this.x=x; this.y=y;
    this.size=Math.random()*4+2;
    this.speedX=(Math.random()-0.5)*2;
    this.speedY=(Math.random()-0.5)*2;
    this.color=color; this.alpha=1;
  }
  update(level){ this.x+=this.speedX*level*5; this.y+=this.speedY*level*5; this.alpha-=0.02; }
  draw(){ ctx.globalAlpha=this.alpha; ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1;}
}

function setupCanvas(){ canvas.width=300; canvas.height=300; ctx.clearRect(0,0,canvas.width,canvas.height); }

function getDynamicColor(dataArray){
  const bass=dataArray.slice(0,bufferLength/3).reduce((a,b)=>a+b,0)/(bufferLength/3);
  const mid=dataArray.slice(bufferLength/3,2*bufferLength/3).reduce((a,b)=>a+b,0)/(bufferLength/3);
  const treble=dataArray.slice(2*bufferLength/3).reduce((a,b)=>a+b,0)/(bufferLength/3);
  const hue=(bass+mid+treble)*0.4;
  return {haloColor:`hsl(${hue%360},100%,60%)`, particleColor:`hsl(${(hue+180)%360},100%,60%)`};
}

function drawParticlesAndHalo(){
  requestAnimationFrame(drawParticlesAndHalo);
  if(!analyser) return;
  analyser.getByteFrequencyData(dataArray);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const cx=canvas.width/2, cy=canvas.height/2;
  let sum=0; for(let i=0;i<bufferLength;i++) sum+=dataArray[i];
  const level=sum/bufferLength/128;
  const {haloColor, particleColor}=getDynamicColor(dataArray);
  const baseRadius=110;
  const haloRadius=baseRadius+level*40;
  rotation+=0.01;
  ctx.save();
  ctx.translate(cx,cy);
  ctx.rotate(rotation);
  const gradient=ctx.createRadialGradient(0,0,haloRadius-10,0,0,haloRadius);
  gradient.addColorStop(0,haloColor.replace('60%','20%'));
  gradient.addColorStop(1,haloColor.replace('60%','0%'));
  ctx.fillStyle=gradient;
  ctx.beginPath();
  ctx.arc(0,0,haloRadius,0,Math.PI*2); ctx.fill();
  ctx.restore();
  const count=Math.floor(level*5);
  for(let i=0;i<count;i++) particles.push(new Particle(cx,cy,particleColor));
  for(let i=particles.length-1;i>=0;i--){ const p=particles[i]; p.update(level); p.draw(); if(p.alpha<=0) particles.splice(i,1);}
}

async function toggleAudio(){
  if(!started){
    audioCtx=new(window.AudioContext||window.webkitAudioContext)();
    source=audioCtx.createMediaElementSource(audio);
    analyser=audioCtx.createAnalyser();
    source.connect(analyser); analyser.connect(audioCtx.destination);
    analyser.fftSize=256;
    bufferLength=analyser.frequencyBinCount;
    dataArray=new Uint8Array(bufferLength);
    setupCanvas(); drawParticlesAndHalo(); started=true;
  }
  if(audioCtx.state==='suspended') await audioCtx.resume();
  if(!playing){ await audio.play(); playBtn.textContent="‚è∏"; playing=true; }
  else { audio.pause(); playBtn.textContent="‚ñ∂"; playing=false; }
}

playBtn.addEventListener('click',toggleAudio);
profile.addEventListener('click',toggleAudio);
window.addEventListener('load',setupCanvas);
</script>
</body>
</html>
